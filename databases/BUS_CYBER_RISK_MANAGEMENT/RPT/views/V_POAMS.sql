create or replace view V_POAMS(
	ID,
	REPORTDATE,
	ARCHER_TRACKING_ID,
	SYSTEM_ID,
	FISMA_ID,
	IS_MARKETPLACE,
	POAM_ID,
	DAYS_OPEN,
	OVERALL_STATUS,
	AUTHORIZATION_PACKAGE,
	ESTIMATED_COMPLETION_DATE,
	SCHEDULED_COMPLETION_DATE,
	ACTUAL_COMPLETION_DATE,
	CAAT_ID,
	CAAT,
	COST,
	LABOR_ESTIMATE,
	FUNDING_SOURCE,
	POAM_CLOSED_DATE,
	POAM_OWNER,
	POAM_REVIEWER,
	REVIEW_STATUS,
	REVIEW_DATE,
	REVIEW_COMMENTS,
	TARGET,
	SUBMISSION_STATUS,
	WEAKNESS_ID,
	WEAKNESS_CREATION_DATE,
	WEAKNESS_RISK_LEVEL,
	WEAKNESS_SEVERITY,
	WEAKNESS_POC
) WITH ROW ACCESS POLICY ACCESS_CONTROL.SECURITY.CRM_RPT_FISMA_POLICY ON (SYSTEM_ID)
 COMMENT='Used in Other RPT view to get current POA&M related information'
 as
SELECT 
p.ID,
p.REPORT_DATE as REPORTDATE,
p.ARCHER_TRACKING_ID,
p.SYSTEM_ID,
p.SYSTEM_ID FISMA_ID,
S.IS_MARKETPLACE,
p.POAM_ID,
p.DAYS_OPEN,
p.OVERALL_STATUS,
p.AUTHORIZATION_PACKAGE,
p.ESTIMATED_COMPLETION_DATE,
p.SCHEDULED_COMPLETION_DATE,
p.ACTUAL_COMPLETION_DATE,
p.CAAT_ID,
p.CAAT,
p.COST,
p.LABOR_ESTIMATE,
p.FUNDING_SOURCE,
p.POAM_CLOSED_DATE,
p.POAM_OWNER,
p.POAM_REVIEWER,
p.REVIEW_STATUS,
p.REVIEW_DATE,
p.REVIEW_COMMENTS,
p.TARGET,
p.SUBMISSION_STATUS,
p.WEAKNESS_ID,
p.WEAKNESS_CREATION_DATE,
p.WEAKNESS_RISK_LEVEL,
p.WEAKNESS_SEVERITY,
p.WEAKNESS_POC
FROM TABLE(CORE.FN_CRM_GET_REPORT_ID(0)) r
JOIN CORE.VW_POAMHIST p on p.REPORT_ID = r.REPORT_ID
JOIN CORE.VW_SYSTEMS S on P.SYSTEM_ID = S.SYSTEM_ID
;